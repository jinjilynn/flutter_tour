# Dart Language



## 前言

算法

## 标识符

- 数字、字母、下划线、$
- 不能数字开头开头
- 不能关键字或保留字
- 区分大小写

## 变量声明

- var 可赋予不同类型的值，有一个推测过程，其实声明的同时已经决定了数据类型

- 变量的初始化值为null

- final声明只能赋值一次的变量,在类中必须被初始化

- const声明编译期的常量

- dynamic

  - var a;		这样写的时候a会自动被转为dynamic类型

  - var a =1；这样a就会是int类型，a不能再被赋值为其他类型

  - dynamic与object的区别就是在调用某些属性时进行静态检查报不报错的问题,object会报错

## 数据类型

- num
- strings
- booleans
- lists (also known as arrays)
- sets
- maps
- runes (for expressing Unicode characters in a string)
- symbols
- null -- null是所有类型的子类,所以可以赋值给所有类型的变量
- 真正意义上的数据类型就那几个, 然后会在那几个的基础之上包一层Object

### numbers

- 类型：
  - num
    -  int
    -  double 既可以是整型也可以是浮点型

- 操作: 
  - +
  - -
  - *
  -  /
  - ~/
  - %

- 属性
  - isNaN
  - isEven
  - isOdd 
  - ...

- 方法:
  - abs()
  - round()
  - ceil()
  - floor()
  - toInt()
  - toDouble()
  -  ...

### string

- 字面量
  - 单引号
  - 双引号
  - 三引号
  - r 忽略转义字符

- 操作
  - +
  - *（重复次数)
  - ==
  - []

- 插值表达式：
  - ${expression}
  - $var 适合只是一个变量的情形
- 属性
  -  length
  - isEmpty
  - isNotEmpty
  - ...

- 方法:
  - contains()
  - subString()
  - startWith()
  - endWith()
  - indexOf()
  - lastIndexOf()
  - toLowerCase()
  - toUpperCase()
  - trim()
  - split()
  - replaceAll()
  - ...

### bool

- value: true | false

### List

- 一般创建：var list = [1,2,3]

- 内容不可变的list:：var list = const [1,2,3];

- 构造创建：var list = new List();

- methods: generate()、 add()、insert()、remove()、clear()、asMap()

- 遍历

  - for
  - for in
  - forEach
  - 。。。


### Map

- var map = {'first': 'value'}	'first'不能写成first,和js不一样
- var map = const {'first': 'value', 1: true}
- var map = new Map()
- fields: length、isEmpty、keys、values
- methods: containsKey()、containsValue()、remove()、forEach()
- 遍历
  - forEach
- 键值为对象的时候,map在取值的时候需要用引用

### Set

- {'sdss',2123,'sdks}
- new Set()



## 算术运算符

- 加减乘除 + - * / ~/ %
- 递增递减：++ --

## 关系运算符

- ==, !==,>,<,>=,<=
- == 判断内容相等

## 逻辑运算符

- !, &&, || 

## 赋值运算符

- =
- ??=
-  +=
-  -=
- ~/=
- %=

## 条件表达式

- A ? a : b
- c = a ?? b

## 控制流语句

- if
- for
- for in  可以被break或continue终止
- while
- do while
- switch case 其中continue可以定义跳任意标签,每个标签下continue或break必须有一个

## Function

- 定义：签名[返回类型 方法名(参数)]+方法体
- 特性：

  - 方法也是对象，并有具体的类型Function

  - 方法返回值类型和参数类型都可以省略，参数省略了就是dynamic

  - 存在箭头语法 =>

  - 方法都有返回值，没有指定返回值则为null，不管返回值类型指定的啥
- 可选参数

  - 可选命名参数 { int age, param2, ... }，调用的时候需要根据名称传递参数 fun(age:23)
  - 可选位置参数 [ int age,String gender, ... ]，调用的时候根据位置按顺序传递参数就可以了fun(12,'male')
  - 如果存在具体参数，可选参数必须在具体参数后面
- 默认参数

  - 使用=在可选参数中使用默认值，默认值只能是编译期常量
  - 命名的可选参数默认值可以用:分隔
- 可选参数和命名参数不能同时存在
- 方法对象

  - 作为对象对其他变量进行赋值
  - 作为参数传递给其他函数
    - 函数在被定义为形式参数时1是可以定义函数签名,2是可以定义 Function变量
    - 函数在作为实参被传递时,可以是变量或者匿名函数
- 匿名方法：() {} | () => {} 
  - 匿名方法没有返回类型
  - 匿名方法没有函数名称
- 闭包

  - 闭包是一个方法（对象）
  - 闭包定义在其他方法内部
  - 闭包能够访问外部方法中的局部变量，并持有其状态

## 类

- 类

  - 声明类	class
  - 创建对象 new，new可以省略
  - 所有对象默认继承Object
  - this表示当前实例对象
  - 如果方法或者属性的名称前面有下划线,那么这个变量就不能被实例在外部引用到
    - 但如果都在同一个dart文件下则没有私有属性这么一说了
- 方法

  - 方法不能被重载--改变方法签名重栽报错.  就是不能在同一个对象中定义相同名字的两个或以上的函数
- 属性

  - 属性默认生成计算属性即getter和setter
  - final声明的属性只有getter方法
  - 属性通过.操作符访问
  - 计算属性(accssor)
    - 定义：计算属性的值是通过计算得来的，本身不存储值
    - 使用：get && set  [返回类型 get || set 属性名 函数体]
    - get语法真是个垃圾 无参函数连括号都没有,和正常函数的写法不一致
- 构造方法
  - 和类名同名的方法;
  - 如果没有自定义的构造方法，会有个默认的构造方法
  - 如果存在自定义构造方法，默认构造方法是无效的
  - 一般构造方法都是默认隐式返回实例对象的,但不能显式返回,factory构造方法除外
  - 构造函数体内不能对final变量进行赋值
  - 构造函数可以没有函数体;
    - 在没有函数体的时候可以使用参数赋值法为内部变量赋值  classname(this.xx)
      - 这种的赋值操作可以预见会在函数体执行之前执行,所以可以为final变量赋值
  - 既然方法不能重载,构造方法也不可以重载
  - 命名构造方法可以实现多个构造方法
    - 使用 类名.方法名 实现
  - 常量构造方法
    - 一个对象的在初始化完成之后再也不会改变了
    - 在构造方法之前写const
    - Can't define a const constructor for a class with non-final fields
  - 工厂构造方法
    - 在构造方法之前添加关键字factory
    - 工厂构造方法函数体里可以返回对象,但返回的必须是该类的实例
  - 初始化列表
    - 会在构造方法之前执行
    - 跟在构造方法后面,用冒号：紧跟构造函数,可以使用的变量值都是前面构造函数的形参里定义的
    - 使用逗号分隔初始化列表
  - 同一个类中的不同构造方法也是可以相互调用的
    - 调用方式和初始化列表相似  className.xxx():this.yyy();
- static

  - 作用：实现类级别的变量和函数
  - 特性
    - 静态成员不能访问非静态成员，非静态成员可以访问静态成员
  - 类级别的常量可以用 static const 声明
- 对象操作符

  - 条件运算符 ?.	如果为空就不继续点操作，用于空指针的问题
- 类型转换

  - as	用于在兼容的引用类型之间执行转换
- 判断是否指定类型

  - is	is!
- 级联操作符 

  - ..  运行完返回原对象，可以进行级联操作
- call方法

  - 定义：如果类实现了call方法，则该类的对像可以作为方法使用

## 面向对象

- 继承
  - 关键字：extends
  - 子类覆写说明关键字：@override
  - 特征
    - 单继承
    - 继承父类可见的属性和方法，不会继承构造方法
    - 子类可以复写父类中的方法、getter和setter
    - 子类中调用父类可以用super关键字
  - 构造方法
    - 特征：
      - 子类的构造方法会默认调用父类的无名无参构造方法,如果父类里存在有效的无名构造方法
      - 如果父类中不存在有效无名无参的构造方法，则要显示调用父类构造方法
      - 父类构造方法需要的参数即super需要的参数是从子类构造函数的实参中获取的
    - 执行顺序
      - 父类构造方法在子类构造方法之前执行
      - 如果有初始化列表，则初始化列表会在父类构造方法之前执行，初始化列表和父类构造函数通过逗号间隔， 并且父类构造函数要放到最后面
      - 初始化列表里不能初始化父类里的变量
- 抽象方法
  - 定义：除了构造函数以外,就是没有方法体的方法
  - 抽象方法不需要用abstract修饰，只要没有具体实现即可
- 抽象类
  - 定义：使用abstract修饰，不能被实例化
  - 特征
    - 抽象类可以没有抽象方法
    - 有抽象方法的类一定要声明为抽象类
    - 被继承时所有的抽象方法都要被覆写
- 接口
  - 关键字：implements
  - 作为接口的类可以是抽象类也可以不是抽象类
  - 可以同时继承多个接口
  - 使用了implements的类要实现接口定义的所有可见的属性和方法
  - implements接口不需要也没办法去调用接口里的构造函数
  - 建议：虽然任何类都可以是接口，但是最好还是使用抽象类当作接口
- Mixins
  - 行为和继承相似,除了没有构造函数这一点,可以假装实现多继承的效果
  - 作为mixins的类可以是抽象类也可以不是抽象类
  - 关键字：with
  - 特征
    - 作为mixin的类即with后面的类，不能有显示声明的构造方法
    - 作为mixin的类只能继承Object
    - 先有继承才能后有with即在extends后面，with后面不同的类用逗号，分隔
    - 当mixin的时候，如果不同类中有同名的方法，则最终是按顺序决定的，会继承到最后一个类的方法
  - 用途：多个类层次结构中重用代码的一种方式
- 多态时不可以调用子类的方法和属性
- 重栽运算符（操作符覆写）
  - 作用:使用操作符形成一个表达式,表达式可以具有单个操作值或者2个操作值,单操作值表达式在定义operator的时候没有参数,2个操作值表达式在定义operator的时候有2个参数,操作符的左操作值为对象,右操作值为某个变量,该变量就是在重写操作符时定义的那个参数
  - 使用:返回类型 operator  操作符(参数){实现... return返回值 }
    - 参数的个数根据操作符的不同而不同,一般是0或1个
  - 可覆写的操作符
    - <
    - *>*
    - *>=*
    - <=
    - +
    - *-*
    - *
    - /
    - ~/
    - %
    - |
    - ^
    - &
    - *>>*
    - <<
    - ~
    - ==
    - []
    - []=
  - 操作符覆写需要在类中定义
    - 如果覆写==，还需要覆写对象的hashCode getter方法



## 枚举

- 有穷序列集的数据类型
- 使用关键字enum定义
- 场景：用于替代常量
- 特性：
  - index从0开始
  - 不能指定index原始值
  - 不能添加方法

## 泛型

- 作用：可使用泛型限定类型，提高代码的复用程度，存在泛型的原因完全是因为强类型系统所致
- 使用：
  - 类的泛型	*class classname<T>{}*
    - 需要在类名后面跟范型,这个范型参数可以在类的内部使用
    - 提高代码的复用度
    - 在声明的时候使用
  - 方法的泛型 *void fun<T>(T param){}*
    - 在方法名称后面添加范型,这个范型可以约束后面参数所使用的类型
  - 字面量范型
    - 范型约束也可以加在支持范型的字面量实例前面

### 库 

一个dart文件就是一个库,如果一个dart文件中有变量名称前加了下划线,那么在这个dart文件被引用时,那个加了下划线的变量是不可见的

- 自定义的库
- 系统内置的库
- pub包管理中的库
- as重命名
  - import...as...
- 部分导入
  - import...show...
  - Import...hide...
- 延迟加载和分片
  - deffer
  - part